<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
		"-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
		"http://struts.apache.org/dtds/struts-2.5.dtd">
		
<struts>
	<package name="default" extends="struts-default">
		<!-- Default Action -->
		<default-action-ref name="index" />
		
		<!-- "index" Action -->
		<action name="index">
			<result>/jsp/index.jsp</result>
		</action>
		
		<!-- Search Action -->
		<action name="search"
				class="org.openclassroom.projet.webapp.action.SearchAction"
				method="doResearch">
			<result>/jsp/search.jsp</result>
		</action>
		
		<!-- Detail Actions -->
		<action name="detail_topo"
				class="org.openclassroom.projet.webapp.action.OverviewAction"
				method="doDetailTopo">
			<result name="success">/jsp/detail/detail_topo.jsp</result>		
		</action>
		
		<action name="detail_site"
				class="org.openclassroom.projet.webapp.action.OverviewAction"
				method="doDetailSite">
			<result name="success">/jsp/detail/detail_site.jsp</result>
		</action>
		
		<action name="detail_sector"
				class="org.openclassroom.projet.webapp.action.OverviewAction"
				method="doDetailSector">
			<result name="success">/jsp/detail/detail_site.jsp</result>
		</action>
		
		<action name="detail_route"
				class="org.openclassroom.projet.webapp.action.OverviewAction"
				method="doDetailRoute">
			<result name="success">/jsp/detail/detail_site.jsp</result>
		</action>
		
	</package>
	
	<package name="ajax" extends="default, json-default">

        <global-results>
            <result name="error" type="json">
                <param name="statusCode">400</param>
                <param name="includeProperties">actionErrors.*,fieldErrors.*</param>
                <param name="ignoreHierarchy">false</param>
            </result>
        </global-results>

        <!--  -->
        <action name="ajax_getDetailSite"
                class="org.openclassroom.projet.webapp.action.OverviewAction"
                method="doAjaxOnSelectSite">
            <result name="success" type="json">
            	<param name="root">site</param>
            </result>
        </action>
        
        <!--  -->
        <action name="ajax_getListSector"
                class="org.openclassroom.projet.webapp.action.OverviewAction"
                method="doAjaxOnSelectSite">
            <result name="success" type="json">
            	<param name="root">listSector</param>
            </result>
        </action>
        
        <!--  -->
        <action name="ajax_getDetailSector"
                class="org.openclassroom.projet.webapp.action.OverviewAction"
                method="doAjaxOnSelectSector">
            <result name="success" type="json">
            	<param name="root">sector</param>
            </result>
        </action>
        
        <!--  -->
        <action name="ajax_getListRoute"
                class="org.openclassroom.projet.webapp.action.OverviewAction"
                method="doAjaxOnSelectSector">
            <result name="success" type="json">
            	<param name="root">listRoute</param>
            </result>
        </action>

    </package>
</struts>